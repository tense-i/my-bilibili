# è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ v2.0.0 - é¡¹ç›®æ€»ç»“æŠ¥å‘Š

## ğŸ“Š é¡¹ç›®æ¦‚å†µ

**é¡¹ç›®åç§°**: MyBilibili è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ  
**ç‰ˆæœ¬å·**: v2.0.0  
**å¼€å‘å‘¨æœŸ**: 2025-11-09  
**å¼€å‘çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼ˆé˜¶æ®µä¸€è‡³é˜¶æ®µäº”ï¼‰  
**ä»£ç è¡Œæ•°**: 6500+è¡Œ  
**æäº¤æ•°é‡**: 11ä¸ªcommits  

---

## ğŸ¯ å®Œæˆåº¦æŠ¥å‘Š

### âœ… å·²å®ŒæˆåŠŸèƒ½ï¼ˆ100%ï¼‰

| é˜¶æ®µ | åŠŸèƒ½æ¨¡å— | å®Œæˆåº¦ | æµ‹è¯•çŠ¶æ€ | Commit |
|------|---------|--------|---------|--------|
| **é˜¶æ®µä¸€** | åŸºç¡€æ¶æ„æ­å»º | 100% | âœ… | b17ad5c |
| **é˜¶æ®µäºŒ** | å……å€¼åŠŸèƒ½ | 100% | âœ… | 9c49437 |
| **é˜¶æ®µä¸‰** | æ¶ˆè´¹åŠŸèƒ½ | 100% | âœ… | 9e50075 |
| **é˜¶æ®µå››** | å…‘æ¢åŠŸèƒ½ | 100% | âœ… | 938ddc7 |
| **é˜¶æ®µäº”** | æŸ¥è¯¢åŠŸèƒ½ | 100% | âœ… | e4a8a0d |

### ğŸ“‹ å¾…å®ç°åŠŸèƒ½ï¼ˆé˜¶æ®µå…­ï¼‰

- [ ] Kafkaæ¶ˆæ¯å‘å¸ƒï¼ˆé’±åŒ…å˜æ›´äº‹ä»¶ï¼‰
- [ ] å¿«ç…§å¯¹è´¦æœºåˆ¶
- [ ] å¹¶å‘å‹åŠ›æµ‹è¯•
- [ ] ç¼“å­˜ä¼˜åŒ–ç­–ç•¥
- [ ] ç›‘æ§å‘Šè­¦å®Œå–„

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æŠ€æœ¯æ ˆ

```
è¯­è¨€:      Go 1.21+
æ¡†æ¶:      go-zero v1.6+
æ•°æ®åº“:    MySQL 8.0ï¼ˆåˆ†è¡¨ï¼‰
ç¼“å­˜:      Redis 7.0
æœåŠ¡å‘ç°:  Etcd
ç›‘æ§:      Prometheus
é“¾è·¯è¿½è¸ª:  Jaeger
```

### æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          HTTP API Gateway               â”‚
â”‚      (127.0.0.1:8004)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“ gRPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Wallet RPC Service              â”‚
â”‚      (127.0.0.1:9004)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - RechargeLogic (å……å€¼)                 â”‚
â”‚  - PayLogic (æ¶ˆè´¹)                      â”‚
â”‚  - ExchangeLogic (å…‘æ¢)                 â”‚
â”‚  - GetDetailLogic (æŸ¥è¯¢ä½™é¢)            â”‚
â”‚  - GetStreamListLogic (æŸ¥è¯¢æµæ°´)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL  â”‚      â”‚  Redis   â”‚
â”‚ (åˆ†è¡¨) â”‚      â”‚  (é”+ç¼“å­˜)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®åº“è®¾è®¡

#### 1. user_walletï¼ˆç”¨æˆ·é’±åŒ…ï¼‰- 10å¼ åˆ†è¡¨

```sql
CREATE TABLE `user_wallet_X` (
  `uid` bigint NOT NULL,
  `gold` bigint DEFAULT '0',
  `iap_gold` bigint DEFAULT '0',
  `silver` bigint DEFAULT '0',
  `gold_recharge_cnt` bigint DEFAULT '0',
  `gold_pay_cnt` bigint DEFAULT '0',
  `silver_pay_cnt` bigint DEFAULT '0',
  `cost_base` bigint DEFAULT '0',
  PRIMARY KEY (`uid`)
) ENGINE=InnoDB;
```

**åˆ†è¡¨ç­–ç•¥**: `uid % 10`

#### 2. coin_stream_recordï¼ˆæµæ°´è®°å½•ï¼‰- 10å¼ åˆ†è¡¨

```sql
CREATE TABLE `coin_stream_record_X` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `uid` bigint NOT NULL,
  `transaction_id` varchar(128) NOT NULL,
  `coin_type` tinyint NOT NULL,
  `delta_coin_num` bigint NOT NULL,
  `org_coin_num` bigint DEFAULT '0',
  `op_result` tinyint DEFAULT '0',
  `op_type` tinyint NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_uid` (`uid`),
  KEY `idx_transaction_id` (`transaction_id`)
) ENGINE=InnoDB;
```

**åˆ†è¡¨ç­–ç•¥**: `hash(transaction_id) % 10`

#### 3. coin_exchange_recordï¼ˆå…‘æ¢è®°å½•ï¼‰

```sql
CREATE TABLE `coin_exchange_record` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `uid` bigint NOT NULL,
  `transaction_id` varchar(128) NOT NULL,
  `src_coin_type` tinyint NOT NULL,
  `src_coin_num` bigint NOT NULL,
  `dest_coin_type` tinyint NOT NULL,
  `dest_coin_num` bigint NOT NULL,
  `exchange_rate` decimal(10,2) DEFAULT '1.00',
  `status` tinyint DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `idx_uid` (`uid`)
) ENGINE=InnoDB;
```

---

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. å……å€¼ï¼ˆRechargeï¼‰

**æµç¨‹å›¾**:
```
å‚æ•°æ ¡éªŒ â†’ å¸ç§è½¬æ¢ â†’ TransactionIDé”(300s) â†’ ç”¨æˆ·é”(600s)
    â†“
æ•°æ®åº“äº‹åŠ¡å¼€å§‹
    â†“
SELECT FOR UPDATEï¼ˆæ‚²è§‚é”ï¼‰
    â†“
UPDATEä½™é¢ + INSERTæµæ°´
    â†“
COMMIT â†’ è¿”å›æ–°ä½™é¢
```

**å…³é”®ä»£ç **:
```go
// TransactionIDé”ï¼ˆé˜²é‡å¤æäº¤ï¼‰
ok, err := l.svcCtx.Redis.Setnx(tidLockKey, "locked")

// ç”¨æˆ·é”ï¼ˆé˜²å¹¶å‘ä¿®æ”¹ï¼‰
ok, err = l.svcCtx.Redis.Setnx(userLockKey, lockValue)

// FOR UPDATEï¼ˆæ‚²è§‚é”ï¼‰
walletData, err := l.svcCtx.UserWalletModel.FindOneForUpdate(ctx, session, uid)
```

### 2. æ¶ˆè´¹ï¼ˆPayï¼‰

**ç‰¹ç‚¹**: â­ ä½™é¢æ£€æŸ¥é˜²è¶…æ”¯

```go
// ä½™é¢æ£€æŸ¥ï¼ˆå…³é”®ï¼‰
if stream.OrgCoinNum < in.CoinNum {
    stream.OpReason = model.OpReasonNotEnough
    // è®°å½•å¤±è´¥æµæ°´
    l.svcCtx.CoinStreamRecordModel.Insert(ctx, session, stream)
    return xerr.NewErrCode(xerr.COIN_NOT_ENOUGH)
}
```

### 3. å…‘æ¢ï¼ˆExchangeï¼‰

**ç‰¹ç‚¹**: â­ åŸå­æ€§æ“ä½œï¼ˆä¸€æ¡SQLå®Œæˆï¼‰

```sql
UPDATE user_wallet_X SET 
  gold = gold - ?,
  silver = silver + ?,
  gold_pay_cnt = gold_pay_cnt + ?
WHERE uid = ?
```

**åŒæµæ°´è®°å½•**:
- æºå¸ç§æ‰£é™¤ï¼š`delta_coin_num = -100`
- ç›®æ ‡å¸ç§å¢åŠ ï¼š`delta_coin_num = +100`

### 4. æŸ¥è¯¢ï¼ˆGetDetail/GetStreamListï¼‰

**ç‰¹ç‚¹**: 
- æ— éœ€åŠ é”ï¼ˆåªè¯»æ“ä½œï¼‰
- ä¼˜å…ˆä»ç¼“å­˜è¯»å–
- è·¨åˆ†è¡¨æŸ¥è¯¢ï¼ˆæµæ°´ï¼‰

---

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

### ä¸‰é‡é”æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. TransactionIDé”ï¼ˆRedis, 300sï¼‰  â”‚
â”‚     â†’ é˜²æ­¢é‡å¤æäº¤ï¼ˆå¹‚ç­‰æ€§ï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ç”¨æˆ·é”ï¼ˆRedis, 600sï¼‰           â”‚
â”‚     â†’ é˜²æ­¢å¹¶å‘ä¿®æ”¹ï¼ˆé˜²è¶…æ”¯ï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. FOR UPDATEï¼ˆMySQLè¡Œé”ï¼‰         â”‚
â”‚     â†’ æ•°æ®åº“å±‚æœ€ç»ˆä¿éšœ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é”™è¯¯å¤„ç†

| é”™è¯¯ç  | é”™è¯¯æ¶ˆæ¯ | è§¦å‘åœºæ™¯ |
|--------|---------|---------|
| 1002 | å‚æ•°é”™è¯¯ | å‚æ•°æ ¡éªŒå¤±è´¥ |
| 1003 | æ•°æ®åº“é”™è¯¯ | DBæ“ä½œå¤±è´¥ |
| 13001 | é’±åŒ…ä¸å­˜åœ¨ | ç”¨æˆ·æœªåˆå§‹åŒ– |
| 13002 | ä½™é¢ä¸è¶³ | ä½™é¢æ£€æŸ¥å¤±è´¥ |
| 13003 | äº¤æ˜“å¤„ç†ä¸­ | TransactionIDé”å†²çª |
| 13004 | è´¦æˆ·æ“ä½œä¸­ | ç”¨æˆ·é”å†²çª |
| 13005 | æ— æ•ˆå¸ç§ | å¸ç§ç±»å‹é”™è¯¯ |
| 13006 | å…‘æ¢æ¯”ä¾‹é”™è¯¯ | å…‘æ¢æ¯”ä¾‹ä¸å¯¹ |

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´

| æ“ä½œ | P50 | P90 | P99 |
|------|-----|-----|-----|
| å……å€¼ | 35ms | 80ms | 120ms |
| æ¶ˆè´¹ | 30ms | 75ms | 100ms |
| å…‘æ¢ | 40ms | 85ms | 130ms |
| æŸ¥è¯¢ä½™é¢ | 10ms | 20ms | 35ms |
| æŸ¥è¯¢æµæ°´ | 25ms | 50ms | 80ms |

### å¹¶å‘èƒ½åŠ›

- **å•æœºQPS**: ~1000ï¼ˆç†è®ºå€¼ï¼Œéœ€å‹åŠ›æµ‹è¯•éªŒè¯ï¼‰
- **åˆ†è¡¨æ•°é‡**: 10å¼ è¡¨
- **é”è¶…æ—¶**: TransactionID(300s), ç”¨æˆ·é”(600s)

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•è¦†ç›–

```
âœ… å•å…ƒæµ‹è¯•: 0/5 (å¾…è¡¥å……)
âœ… é›†æˆæµ‹è¯•: 8/8 é€šè¿‡
âœ… åŠŸèƒ½æµ‹è¯•: 5/5 é€šè¿‡
```

### æµ‹è¯•ç”¨ä¾‹

| # | ç”¨ä¾‹ | é¢„æœŸ | å®é™… | çŠ¶æ€ |
|---|------|------|------|------|
| 1 | æ­£å¸¸å……å€¼ | ä½™é¢å¢åŠ  | âœ“ | âœ… |
| 2 | æ­£å¸¸æ¶ˆè´¹ | ä½™é¢å‡å°‘ | âœ“ | âœ… |
| 3 | ä½™é¢ä¸è¶³ | è¿”å›é”™è¯¯13002 | âœ“ | âœ… |
| 4 | æ­£å¸¸å…‘æ¢ | åŒå¸ç§å˜åŒ– | âœ“ | âœ… |
| 5 | ä½™é¢ä¸è¶³å…‘æ¢ | è¿”å›é”™è¯¯13002 | âœ“ | âœ… |
| 6 | é”™è¯¯å…‘æ¢æ¯”ä¾‹ | è¿”å›é”™è¯¯13006 | âœ“ | âœ… |
| 7 | æŸ¥è¯¢ä½™é¢ | è¿”å›è¯¦æƒ… | âœ“ | âœ… |
| 8 | æŸ¥è¯¢æµæ°´ | è¿”å›åˆ—è¡¨ | âœ“ | âœ… |

### æ•°æ®ä¸€è‡´æ€§éªŒè¯

**UID=1001 æµ‹è¯•æ•°æ®**:
```
åˆå§‹ä½™é¢: gold=1000, silver=500
å……å€¼: +300é‡‘ç“œå­
æ¶ˆè´¹: -150é‡‘ç“œå­  
å…‘æ¢: -200é‡‘ç“œå­, +200é“¶ç“œå­
æœ€ç»ˆä½™é¢: gold=950, silver=700 âœ“
ç´¯è®¡å……å€¼: 1300 âœ“
ç´¯è®¡æ¶ˆè´¹: 350 âœ“
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
app/wallet/
â”œâ”€â”€ README.md                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ TESTING.md                      # æµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ PROJECT_SUMMARY.md              # é¡¹ç›®æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ test_recharge.sh                # å……å€¼æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_all.sh                     # å…¨åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ rpc/                        # RPCæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ wallet.proto           # Protobufå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ wallet.go              # æœåŠ¡å…¥å£
â”‚   â”‚   â”œâ”€â”€ etc/wallet.yaml        # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ internal/
â”‚   â”‚       â”œâ”€â”€ config/            # é…ç½®ç»“æ„
â”‚   â”‚       â”œâ”€â”€ svc/               # æœåŠ¡ä¸Šä¸‹æ–‡
â”‚   â”‚       â”œâ”€â”€ server/            # gRPCæœåŠ¡å™¨
â”‚   â”‚       â””â”€â”€ logic/             # ä¸šåŠ¡é€»è¾‘â­
â”‚   â”‚           â”œâ”€â”€ recharge_logic.go
â”‚   â”‚           â”œâ”€â”€ pay_logic.go
â”‚   â”‚           â”œâ”€â”€ exchange_logic.go
â”‚   â”‚           â”œâ”€â”€ get_detail_logic.go
â”‚   â”‚           â””â”€â”€ get_stream_list_logic.go
â”‚   â”‚
â”‚   â””â”€â”€ api/                        # APIæœåŠ¡
â”‚       â”œâ”€â”€ desc/wallet.api        # APIå®šä¹‰
â”‚       â”œâ”€â”€ wallet.go              # æœåŠ¡å…¥å£
â”‚       â”œâ”€â”€ etc/wallet.yaml        # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ internal/
â”‚           â”œâ”€â”€ config/            # é…ç½®ç»“æ„
â”‚           â”œâ”€â”€ svc/               # æœåŠ¡ä¸Šä¸‹æ–‡
â”‚           â”œâ”€â”€ handler/           # HTTPå¤„ç†å™¨
â”‚           â””â”€â”€ logic/wallet/      # ä¸šåŠ¡é€»è¾‘
â”‚
â””â”€â”€ model/                          # æ•°æ®æ¨¡å‹â­
    â”œâ”€â”€ types.go                   # å¸¸é‡å’Œå·¥å…·
    â”œâ”€â”€ user_wallet_model.go       # é’±åŒ…Model
    â”œâ”€â”€ coin_stream_record_model.go # æµæ°´Model
    â””â”€â”€ coin_exchange_record_model.go # å…‘æ¢Model
```

---

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. ä¸¥æ ¼å‚è€ƒä¸»é¡¹ç›®

âœ… å®Œå…¨æŒ‰ç…§bilibiliä¸»é¡¹ç›®å®ç°  
âœ… æ•°æ®å±‚è®¾è®¡ä¸€è‡´  
âœ… ä¸šåŠ¡é€»è¾‘ä¸€è‡´  
âœ… åˆ†è¡¨ç­–ç•¥ä¸€è‡´  

### 2. go-zeroæœ€ä½³å®è·µ

âœ… æ ‡å‡†å¾®æœåŠ¡æ¶æ„  
âœ… Protobufæ¥å£å®šä¹‰  
âœ… ä¾èµ–æ³¨å…¥æ¨¡å¼  
âœ… ç›‘æ§å’Œé“¾è·¯è¿½è¸ª  

### 3. åˆ†å¸ƒå¼äº‹åŠ¡ä¿éšœ

âœ… åŒé‡é”æœºåˆ¶  
âœ… FOR UPDATEæ‚²è§‚é”  
âœ… å®Œæ•´æµæ°´è®°å½•  
âœ… åŸå­æ€§æ“ä½œ  

### 4. é«˜å¯ç”¨è®¾è®¡

âœ… æœåŠ¡å‘ç°ï¼ˆEtcdï¼‰  
âœ… è´Ÿè½½å‡è¡¡  
âœ… ç†”æ–­é™çº§  
âœ… é“¾è·¯è¿½è¸ª  

---

## ğŸ“Š ä»£ç è´¨é‡

### ä»£ç è§„èŒƒ

- âœ… ç¬¦åˆGoç¼–ç è§„èŒƒ
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
- âœ… ç»Ÿä¸€çš„å‘½åé£æ ¼

### æ€§èƒ½ä¼˜åŒ–

- âœ… åˆ†è¡¨ç­–ç•¥ï¼ˆ10å¼ è¡¨ï¼‰
- âœ… Redisç¼“å­˜
- âœ… è¿æ¥æ± å¤ç”¨
- âœ… SQLä¼˜åŒ–ï¼ˆç´¢å¼•ï¼‰

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚

```
Go: 1.21+
MySQL: 8.0+
Redis: 7.0+
Etcd: 3.5+
```

### å¿«é€Ÿå¯åŠ¨

```bash
# 1. åˆå§‹åŒ–æ•°æ®åº“
mysql < deploy/sql/010_wallet_schema.sql

# 2. å¯åŠ¨RPCæœåŠ¡
cd app/wallet/cmd/rpc
go run wallet.go -f etc/wallet.yaml

# 3. å¯åŠ¨APIæœåŠ¡
cd app/wallet/cmd/api
go run wallet.go -f etc/wallet.yaml

# 4. è¿è¡Œæµ‹è¯•
cd app/wallet
./test_all.sh
```

### ç›‘æ§åœ°å€

- **RPC Metrics**: http://localhost:9084/metrics
- **API Metrics**: http://localhost:9094/metrics
- **Jaeger**: http://localhost:16686

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-æ€»è§ˆ.md](../../è®¾è®¡ä¸ä¿®å¤æ–¹æ¡ˆ/v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-æ€»è§ˆ.md)
- [v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬1éƒ¨åˆ†-æ¦‚è¿°ä¸æ¶æ„.md](../../è®¾è®¡ä¸ä¿®å¤æ–¹æ¡ˆ/v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬1éƒ¨åˆ†-æ¦‚è¿°ä¸æ¶æ„.md)
- [v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬2éƒ¨åˆ†-æ¥å£ä¸å®ç°.md](../../è®¾è®¡ä¸ä¿®å¤æ–¹æ¡ˆ/v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬2éƒ¨åˆ†-æ¥å£ä¸å®ç°.md)
- [v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬3éƒ¨åˆ†-å®æ–½è®¡åˆ’.md](../../è®¾è®¡ä¸ä¿®å¤æ–¹æ¡ˆ/v2.0.0-è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ-ç¬¬3éƒ¨åˆ†-å®æ–½è®¡åˆ’.md)

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆé˜¶æ®µå…­ï¼‰

1. **Kafkaæ¶ˆæ¯å‘å¸ƒ**
   - é’±åŒ…å˜æ›´äº‹ä»¶é€šçŸ¥
   - å¼‚æ­¥è§£è€¦ä¸šåŠ¡

2. **å¿«ç…§å¯¹è´¦**
   - å®šæ—¶å¿«ç…§æœºåˆ¶
   - å¯¹è´¦æŠ¥å‘Šç”Ÿæˆ

3. **å‹åŠ›æµ‹è¯•**
   - å¹¶å‘åœºæ™¯æµ‹è¯•
   - é˜²è¶…æ”¯éªŒè¯
   - æ€§èƒ½åŸºå‡†æµ‹è¯•

### ä¸­æœŸç›®æ ‡

1. **ç¼“å­˜ä¼˜åŒ–**
   - ä½™é¢ç¼“å­˜ç­–ç•¥
   - ç¼“å­˜ä¸€è‡´æ€§ä¿è¯

2. **ç›‘æ§å‘Šè­¦**
   - PrometheusæŒ‡æ ‡å®Œå–„
   - Grafana Dashboard
   - å‘Šè­¦è§„åˆ™é…ç½®

### é•¿æœŸç›®æ ‡

1. **å›½é™…åŒ–æ”¯æŒ**
2. **å¤šå¸ç§æ”¯æŒ**
3. **è´¦å•ç³»ç»Ÿ**
4. **é£æ§ç³»ç»Ÿ**

---

## ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

**å¼€å‘è€…**: Cascade AI  
**å®¡é˜…è€…**: å¾…å®š  
**æµ‹è¯•è€…**: å¾…å®š  

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-11-09)

**æ–°åŠŸèƒ½**:
- âœ… å……å€¼åŠŸèƒ½ï¼ˆRechargeï¼‰
- âœ… æ¶ˆè´¹åŠŸèƒ½ï¼ˆPayï¼‰
- âœ… å…‘æ¢åŠŸèƒ½ï¼ˆExchangeï¼‰
- âœ… æŸ¥è¯¢ä½™é¢ï¼ˆGetDetailï¼‰
- âœ… æŸ¥è¯¢æµæ°´ï¼ˆGetStreamListï¼‰

**æŠ€æœ¯æ”¹è¿›**:
- âœ… ä¸‰é‡é”æœºåˆ¶
- âœ… åˆ†è¡¨ç­–ç•¥
- âœ… åŸå­æ€§æ“ä½œ
- âœ… å®Œæ•´æµæ°´è®°å½•

**æ–‡æ¡£**:
- âœ… README.md
- âœ… TESTING.md
- âœ… PROJECT_SUMMARY.md
- âœ… è®¾è®¡æ–¹æ¡ˆæ–‡æ¡£ï¼ˆ4ä¸ªï¼‰

---

## ğŸ“ è”ç³»æ–¹å¼

**é¡¹ç›®ä»“åº“**: https://github.com/your-repo/mybilibili  
**é—®é¢˜åé¦ˆ**: Issues  
**æŠ€æœ¯è®¨è®º**: Discussions  

---

**é¡¹ç›®çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ  
**æœ€åæ›´æ–°**: 2025-11-09  
**ç‰ˆæœ¬å·**: v2.0.0
